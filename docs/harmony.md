# Whistle and Harmony
Whistle employs the use of [FHIR ConceptMaps](http://hl7.org/fhir/R4/conceptmap.html) to perform data transformations from a local values from a dataset into a terms from one or more public ontologies. To provide access to those translations provided by those ConceptMaps, whistle provides a couple of [functions[(https://github.com/GoogleCloudPlatform/healthcare-data-harmonization/blob/master/mapping_language/doc/reference.md#lookup-syntax)]. 

The whistle authors recommend capturing those harmony mappings in a simple CSV Format.

An in-depth discussion of these functions and how they should be used is beyond the purposes of this manual, but there are a few important things one should know when using Whistler. 

## Harmony is the Key to Interoperability
What these harmony functions provide is the ability to map the local values from your dataset to public terms such as [HPO](https://hpo.jax.org/app/), [Mondo](https://mondo.monarchinitiative.org/), [SNOMED](https://www.snomed.org/) and [LOINC](https://loinc.org/) to name a few. When mapping research dataset terms to public ontologies, other researchers can much more easily identify other datasets of interest and begin using them with far less effort. 

By separating these terms from the rest of the whistle transformation code, we get two very important benefits: 

1) Our whistle code becomes much more generic, making it much easier to reuse whistle files from other projects. 
2) Our transformations can be reviewed by researchers who don't currently have access to the data. If we capture these terms inside the dataset itself, then researchers who wish to understand the how the data that is tagged with a given set of terms looked prior to the mapping must first get access to the data itself. By storing the mappings in a public space that doesn't require special authorization, researchers can make these determinations before beginning the process of gaining access. 
3) Using a tabular format like Alphabet suggests, and Whistler employs, the mappings are easily used by computers to build other types of resources, such as the Whistler ConceptMap whistle code that is generated automatically based on the harmony files provided by the ETL author. 
4) These tables are much easier to reuse than having to dig through large data tables for elements that may be common to a new dataset that is to be loaded. 
5) By using a simple CSV format, the author of the transformations doesn't need to know or understand code or FHIR ConceptMaps. They can jump right in filling in the various mappings using their favorite Spreadsheet tool. 

## Whistler Assumes Harmony File(s) Exists
Whistler requires there to be a Harmony directory and each data table should have at least one file mentioned in the configuration (all tables can refer to the same harmony file). 

While the user can employ as many harmony files as they wish, Whistler's autogenerated helper functions assume a single harmony file is present and that its name is *data-harmony.csv*.

## More About Whistler's Harmony Files
Whistler provides a simple CSV format for creating these Harmony files which can be curated by specialists with domain knowledge using any spreadsheet tool. 

Read more about the Whistler Harmony files in the [Whistler Reference](https://nih-ncpi.github.io/ncpi-whistler/#/ref/harmony_files). 


